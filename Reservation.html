<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Hotel Website</title>
   <!-- font awesome cdn link  -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
   <!-- swiper js cdn link -->
   <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
   <!-- custom css link -->
   <link rel="stylesheet" href="styles/Reservation.css">
</head>

<body>

   <!-- header -->
   <header class="header">
      <a href="#" class="logo">
         <img src="images/logo.png" alt="Logo">
      </a>
      <nav class="navbar">
         <a href="index.html">HOME</a>
         <a href="about.html">ABOUT</a>
         <a href="room1.html">ROOMS</a>
         <a href="#reservation">RESERVATION</a>
         <a href="Gallery.html">GALLERY</a>
         <a href="contact_us.html">CONTACT US</a>
         <a href="./login/Login.html" class="btn">LOG IN</a>
      </nav>
      <div id="menu-btn" class="fas fa-bars"></div>
   </header>
   <!-- end -->

   <!-- home -->
   <section class="home" id="home">
      <div class="swiper-slide slide" style="background: url(images/ContactUS.png) no-repeat;">
      </div>
   </section>
   <!-- end -->

   <!-- Contact us-->
   <div class="contact-section">
      <div class="container">
         <div class="title">RESERVE NOW</div>
         <div class="content">
            <form id="reservationForm">
               <div class="user-details">
                  <div class="input-box">
                     <span class="details">Your Name</span>
                     <input type="text" id="name" name="name" required>
                     <span class="error" id="nameError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Email Address</span>
                     <input type="email" id="email" name="email" required>
                     <span class="error" id="emailError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Phone No</span>
                     <input type="text" id="phone" name="phone" required>
                     <span class="error" id="phoneError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Country</span>
                     <input type="text" id="country" name="country" required>
                     <span class="error" id="countryError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Arrival</span>
                     <input type="date" id="arrival" name="arrival" required>
                     <span class="error" id="arrivalError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Departure</span>
                     <input type="date" id="departure" name="departure" required>
                     <span class="error" id="departureError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Adults</span>
                     <input type="number" id="adults" name="adults" required>
                     <span class="error" id="adultsError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Children</span>
                     <input type="number" id="children" name="children" required>
                     <span class="error" id="childrenError"></span>
                  </div>
                  <div class="input-box">
                     <span class="details">Your Comments</span>
                     <textarea id="comments" name="comments" placeholder="Enter your message" required></textarea>
                     <span class="error" id="commentsError"></span>
                  </div>
               </div>
               <div class="button">
                  <button type="button" id="paymentButton" class="btn" onclick="payment()">Add payment Method</button>
                  <button type="button" id="bookButton" class="btn" onclick="submitForm()" disabled>Book Now</button>
               </div>
            </form>
         </div>
      </div>

      <!-- payment -->
      <div id="payment">
         <div class="payment-main-div" id="payment-popup">
            <div class="payment-container">
               <form class="payment-form" id="payment-form" action="">
                  <div class="payment-number-container">
                     <div class="payment-input-box">
                        <span>Cards accepted :</span>
                        <br>
                        <img src="images/card_img.png" alt="">
                     </div>
                     <br>
                     <label>Card Number</label>
                     <input type="text" name="card-number" id="card-number" maxlength="19"
                        placeholder="1234 5678 9101 1121" required oninput="formatCardNumber(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                  </div>

                  <div class="payment-infos-container">
                     <div class="payment-expiration-container">
                        <label>Expiration Date (MM/YY)</label>
                        <input type="text" name="valid-thru-text" id="valid-thru-text" maxlength="5" placeholder="MM/YY"
                           required
                           onkeypress="return (event.charCode >=48 && event.charCode <= 57) || event.charCode == 47">
                     </div>
                     <div class="payment-cvv-container">
                        <label>Cvv</label>
                        <input type="text" name="cvv-text" id="cvv-text" maxlength="4" placeholder="1234" required
                           onkeypress="return event.charCode >=48 && event.charCode <= 57">
                     </div>
                  </div>
                  <div class="payment-name-container">
                     <label>Name on Card</label>
                     <input type="text" name="name-text" id="name-text" maxlength="30" placeholder="NOAH JACOB" required
                        onkeypress="return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || event.key == ' '">
                  </div>
                  <br>
                  <button type="button" id="add" class="payment-btn" onclick="paymentSubmit()">ADD</button>
               </form>
               <button class="payment-btn" id="cancel" onclick="paymentclosePopup()">CANCEL</button>
            </div>
         </div>
      </div>
      <!-- end -->


      <!-- get in touch-->
      <div class="right">
         <div class="touch">
            <div class="image">
               <img src="images/room-2.jpg" alt="Room Image 1">
            </div>
            <div class="image">
               <img src="images/room-2.jpg" alt="Room Image 2">
            </div>
            <div class="image">
               <img src="images/room-2.jpg" alt="Room Image 3">
            </div>
         </div>
      </div>
   </div>
   <!-- end-->

   <!-- end-->

   <!-- send message -->
   <div class="msg">
      <a href="Sendmsg.html" class="btnsm">Send Message</a>
   </div>
   <!-- end --!>

   <!-- footer -->
   <section class="footer">
      <div class="box-container">
         <div class="box">
            <img src="images/diamond_illustration_logo_design-removebg-preview 2.png" alt="">
         </div>
         <div class="box">
            <h3>Page Links</h3>
            <a href="index.html"> <i class="fas fa-arrow-right"></i> Home</a>
            <a href="about.html"> <i class="fas fa-arrow-right"></i> About</a>
            <a href="Reservation.html"> <i class="fas fa-arrow-right"></i> Reservation</a>
            <a href="Gallery.html"> <i class="fas fa-arrow-right"></i> Gallery</a>
            <a href="contact us.html"> <i class="fas fa-arrow-right"></i> Contact Us</a>
            <a href="Rooms.html"> <i class="fas fa-arrow-right"></i> Rooms</a>
         </div>
         <div class="box">
            <h3>Connect With Us</h3>
            <a href="#"> <i class="fas fa-arrow-right"></i> Address </a>
            <p>No.12, Perera Mawatha, Kandy, Sri Lanka</p>

            <a href="#"> <i class="fas fa-arrow-right"></i> Phone Number </a>
            <p>+94 112345678</p>

            <a href="#"> <i class="fas fa-arrow-right"></i> Email</a>
            <p>hillsightroyalhotel@gmail.com</p>
         </div>
      </div>
      <div class="share">
         <a href="#" class="fab fa-facebook-f"></a>
         <a href="#" class="fab fa-instagram"></a>
         <a href="#" class="fab fa-twitter"></a>
         <a href="#" class="fab fa-pinterest"></a>
      </div>

      <div class="credit">
         &copy; 2023 by <span>Faculty of Technological Studies Group No.02</span>
      </div>

   </section>
   <!-- end -->

   <div class="background" id="background">
      <div class="popup" id="popup">
         <h2>Booking <br> Successfully!</h2>
         <img src="images/msg.png" alt="">
         <h4>Your invoice number <br>sent to your Email. Check <br> your Email....!</h4>
         <button class="btn" type="button" onclick="closePopup()">OK</button>
      </div>
   </div>


   <script>
      const form = document.getElementById("reservationForm");
      const paymentButton = document.getElementById("paymentButton");
      const bookButton = document.getElementById("bookButton");

      function showError(input, message) {
         const errorElement = document.getElementById(input.id + "Error");
         errorElement.innerText = message;
      }

      function clearError(input) {
         const errorElement = document.getElementById(input.id + "Error");
         errorElement.innerText = "";
      }

      function validateField(input, validationFunction, message) {
         if (validationFunction(input.value)) {
            clearError(input);
            return true;
         } else {
            showError(input, message);
            return false;
         }
      }

      function validateForm() {
         const isValidName = validateField(document.getElementById("name"), value => value.trim() !== "", "Name is required");
         const isValidEmail = validateField(document.getElementById("email"), value => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value), "Invalid email address");
         const isValidPhone = validateField(document.getElementById("phone"), value => /^\d{10}$/.test(value), "Phone number must be 10 digits");
         const isValidCountry = validateField(document.getElementById("country"), value => value.trim() !== "", "Country is required");
         const isValidArrival = validateField(document.getElementById("arrival"), value => value.trim() !== "", "Arrival date is required");
         const isValidDeparture = validateField(document.getElementById("departure"), value => {
            const arrivalDate = new Date(document.getElementById("arrival").value);
            const departureDate = new Date(value);
            return departureDate >= arrivalDate;
         }, "Departure date must be later than or equal to Arrival date");
         const isValidAdults = validateField(document.getElementById("adults"), value => value > 0, "Number of adults must be greater than 0");
         const isValidChildren = validateField(document.getElementById("children"), value => value >= 0, "Number of children cannot be negative");
         const isValidComments = validateField(document.getElementById("comments"), value => value.trim() !== "", "Comments are required");

         const isFormValid = isValidName && isValidEmail && isValidPhone && isValidCountry && isValidArrival && isValidDeparture && isValidAdults && isValidChildren && isValidComments;

         bookButton.disabled = !isFormValid;

         return isFormValid;
      }

      function submitForm() {
         if (validateForm()) {
            const formData = new FormData(form);

            // Convert FormData to a plain object
            const data = {};
            formData.forEach((value, key) => {
               data[key] = value;
            });

            console.log(data); // Log the data object to verify the contents
            openPopup(); // Ensure you have a function defined for openPopup
         }
      }

      form.addEventListener("input", validateForm);

      function formatCardNumber(input) {
         // Remove any non-numeric characters
         let cardNumber = input.value.replace(/\D/g, '');

         // Add spaces after every four digits (except the last group of four)
         if (cardNumber.length > 0) {
            cardNumber = cardNumber.match(/.{1,4}/g).join(' ');
         }

         input.value = cardNumber;
      }

      function payment() {
         const paymentPopup = document.getElementById("payment-popup");
         paymentPopup.style.display = "block";  // Show the payment popup
      }

      // JavaScript function to close the payment popup
      function paymentclosePopup() {
         const paymentPopup = document.getElementById("payment-popup");
         paymentPopup.style.display = "none";  // Hide the payment popup
      }

      function openPopup() {
         const background = document.getElementById("background");
         background.classList.add("open-popup");
      }

      function closePopup() {
         const background = document.getElementById("background");
         background.classList.remove("open-popup");
         window.location = "index.html";
      }

      function paymentSubmit() {
         const form = document.getElementById("payment-form");
         const formData = new FormData(form);

         // Convert FormData to a plain object
         const data = {};
         formData.forEach((value, key) => {
            data[key] = value;
         });

         console.log(data);
         paymentclosePopup();
      }
   </script>
   <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>
   <script src="https://kit.fontawesome.com/af38bbe4f6.js" crossorigin="anonymous"></script>
   <script src="script.js"></script>
</body>

</html>